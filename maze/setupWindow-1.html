<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TRON Maze by y-labz</title>
    <meta name="description" content="A TRON-style maze animation using Depth-First Search.">
    <meta name="theme-color" content="#7DFDFE">
    <link rel="icon" href="../icon/rocket.svg" type="image/svg+xml" />

    <!-- Open Graph for social media preview -->
    <meta property="og:title" content="TRON Maze by y-labz" />
    <meta property="og:description" content="A TRON-style maze animation using Depth-First Search." />
    <meta property="og:url" content="https://y-labz.github.io/maze/" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://y-labz.github.io/maze/preview.jpg" />

    <style>
    body {
      margin: 8px;
      background: #111;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      <!-- min-height: 100vh; -->
    }

    #container, #log {
      border: 2px solid #3DFFFC;
      margin: 8px;
      box-sizing: border-box;
      box-shadow: 0 0 12px #3DFFFC, 0 0 20px #3DFFFC88 inset;
    }

    #container {
      display: flex;
      justify-content: center;
      align-items: center;
      background: #222;
    }

    #game {
      width: 100%;
      height: auto;
      max-width: 100%;
      image-rendering: pixelated;
      background: #111;
      display: block;
    }

    #log {
      color: #7DFDFE;
      padding: 1rem;
      overflow-y: auto;
      font-size: 16px;
      font-family: "Courier New", Courier, monospace;
      line-height: 1.2;
      scrollbar-width: thin;
    }
    </style>
  </head>

  <body>
    <script>
    const banner = `
    ▜   ▌    
▌▌▄▖▐ ▀▌▛▌▀▌ 
▙▌  ▐▖█▌▙▌▙▖.
▄▌           
`;

    function setupWindow() {
      let sideLength = Math.min(window.innerWidth, window.innerHeight) - 32;
      let extraLength = Math.max(window.innerWidth, window.innerHeight) - sideLength - 48;

      const container = document.createElement('div');
      container.id = "container";
      container.style.width = sideLength + "px";
      container.style.height = sideLength + "px";

      const logWindow = document.createElement('div');
      logWindow.id = "log";

      if (window.innerWidth > window.innerHeight) {
        logWindow.style.height = sideLength + "px";
        logWindow.style.width = extraLength + "px";

        const wrapper = document.createElement('div');
        wrapper.style.display = "flex";
        wrapper.style.flexDirection = "row";
        wrapper.appendChild(container);
        wrapper.appendChild(logWindow);
        document.body.appendChild(wrapper);
      } else {
        logWindow.style.width = sideLength + "px";
        logWindow.style.height = extraLength + "px";
        document.body.appendChild(container);
        document.body.appendChild(logWindow);
      }

      const canvas = document.createElement('canvas');
      canvas.id = "game";
      canvas.width = sideLength - 4;
      canvas.height = sideLength - 4;
      canvas.style.width = (sideLength - 4) + "px";
      canvas.style.height = (sideLength - 4) + "px";
      container.appendChild(canvas);
    }

    // Enhanced console log
    const originalConsoleLog = console.log;
    console.log = function (...args) {
      const now = new Date().toLocaleTimeString();
      const message = args.map(arg =>
        typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
      ).join(' ');
      const logLine = document.createElement('div');
      logLine.textContent = `[${now}] ${message}`;
      logLine.style.whiteSpace = "pre-wrap";

      const logWindow = document.getElementById("log");
      if (logWindow) {
        logWindow.appendChild(logLine);
        while (logWindow.children.length > 100) {
          logWindow.removeChild(logWindow.firstChild);
        }
        logWindow.scrollTop = logWindow.scrollHeight;
      }
    };

    // Optional: reload on resize (to rebuild layout)
    window.addEventListener('resize', () => location.reload());

    // Init
    setupWindow();
    console.log(banner);
    console.log("TRON Maze booted by y-labz 🚀");
    console.log("Initializing lightcycle engine...");
    </script>
  </body>
</html>
