<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Conway's Game of Life â€” Honey Edition</title>
<style>
  body {
    margin: 0; 
    background: #111;
    color: #0f0;
    font-family: "Courier New", Courier, monospace;
    display: flex; 
    flex-direction: column; 
    align-items: center;
    justify-content: center;
    height: 100vh;
  }
  #game-container {
    border: 2px solid #0f0;
    display: inline-block;
  }
  canvas {
    display: block;
    background: black;
  }
  #log-window {
    margin-top: 1em;
    width: 90vw;
    max-height: 150px;
    overflow-y: auto;
    background: black;
    color: #0f0;
    padding: 0.5em;
    font-family: "Courier New", Courier, monospace;
    border: 1px solid #0f0;
    white-space: pre-wrap;
  }
</style>
</head>
<body>

<div id="game-container">
  <canvas id="game-canvas" width="128" height="128"></canvas>
</div>

<div id="log-window"></div>

<script>
  // Override console.log to print to the log window and console
  const originalConsoleLog = console.log;
  console.log = function (...args) {
    originalConsoleLog.apply(console, args);
    const message = args.map(arg =>
      typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
    ).join(' ');
    const logWindow = document.getElementById("log-window");
    if (logWindow) {
      const logLine = document.createElement('div');
      logLine.textContent = message;
      logWindow.appendChild(logLine);
      const maxLogs = 100;
      while (logWindow.children.length > maxLogs) {
        logWindow.removeChild(logWindow.firstChild);
      }
      logWindow.scrollTop = logWindow.scrollHeight;
    }
  };

  console.log("Conway's Game of Life");
  console.log("... implemented by y-labz, 2025-06");

  // Setup canvas and grid
  const canvas = document.getElementById("game-canvas");
  const ctx = canvas.getContext("2d");
  const width = canvas.width;
  const height = canvas.height;

  // Grid data: 2D array for current state and next state
  let grid = new Array(height);
  let nextGrid = new Array(height);

  for (let y = 0; y < height; y++) {
    grid[y] = new Array(width);
    nextGrid[y] = new Array(width);
  }

  // Initialize grid with random live/dead cells
  function randomizeGrid() {
    for (let y = 0; y < height; y++) {
      for (let x = 0; x < width; x++) {
        grid[y][x] = Math.random() > 0.8 ? 1 : 0; // ~20% alive
      }
    }
    console.log("Grid randomized");
  }

  // Count live neighbors around (x,y)
  function countNeighbors(x, y) {
    let count = 0;
    for (let dy = -1; dy <= 1; dy++) {
      for (let dx = -1; dx <= 1; dx++) {
        if (dx === 0 && dy === 0) continue;
        let nx = x + dx;
        let ny = y + dy;
        if (nx >= 0 && nx < width && ny >= 0 && ny < height) {
          count += grid[ny][nx];
        }
      }
    }
    return count;
  }

  // Compute next grid state by applying Game of Life rules
  function updateGrid() {
    for (let y = 0; y < height; y++) {
      for (let x = 0; x < width; x++) {
        const alive = grid[y][x];
        const neighbors = countNeighbors(x, y);

        if (alive) {
          nextGrid[y][x] = (neighbors === 2 || neighbors === 3) ? 1 : 0;
        } else {
          nextGrid[y][x] = (neighbors === 3) ? 1 : 0;
        }
      }
    }
    // Swap grids
    [grid, nextGrid] = [nextGrid, grid];
  }

  // Draw the grid on canvas
  function drawGrid() {
    const imageData = ctx.createImageData(width, height);
    const data = imageData.data;
    for (let y = 0; y < height; y++) {
      for (let x = 0; x < width; x++) {
        const idx = (y * width + x) * 4;
        const alive = grid[y][x];
        const color = alive ? 0 : 20; // bright green for alive, dark green for dead
        data[idx] = 0;       // R
        data[idx + 1] = color; // G
        data[idx + 2] = 0;   // B
        data[idx + 3] = 255; // A
      }
    }
    ctx.putImageData(imageData, 0, 0);
  }

  // Main animation loop
  function loop() {
    updateGrid();
    drawGrid();
    //requestAnimationFrame(loop);
    console.log("Tick");
    setTimeout(loop, 100); // 100 ms pause = 10 frames per second
  }

  // Start
  randomizeGrid();
  drawGrid();
  console.log("... game started");
  requestAnimationFrame(loop);

</script>

</body>
</html>

